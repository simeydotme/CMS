/**
 * jQuery Tour - the flexible Tour plugin 1.3
 * (1.3.0 - by revaxarts)
 *
 * Copyright (c) 2011-2013 Xaver Birsak
 * http://rxa.li/tour
 *
 * Licensed under the Envato Pty Ltd License Terms:
 * http://codecanyon.net/wiki/support/legal-terms/licensing-terms/
 *
 * limited, non-exclusive, non-transferable, non-sublicensable license
 */
window.jTour=function(j,R){function S(c){switch(c.keyCode){case 37:"keyup"==c.type&&0<b?J():c.preventDefault();break;case 39:"keyup"==c.type?y():c.preventDefault();break;case 38:"keyup"==c.type?v(0.25):c.preventDefault();break;case 40:"keyup"==c.type?v(-0.25):c.preventDefault();break;case 32:p=!0;"keyup"==c.type?D(!0):c.preventDefault();break;case 27:"keyup"==c.type?G():c.preventDefault()}}function H(c){c||(c=b);K=K||$(window).scrollTop();L=L||$(window).scrollLeft();w.show().fadeIn(function(){d.pauseOnHover&&
e.bind({"mouseenter.jTour":D,"mouseleave.jTour":E});d.keyboardNav&&$(document).bind({"keyup.jTour":S,"keydown.jTour":S});z=!1;b=c;d.onStart.call(h,b);M(c)});d.showControls&&(q.find(".play").hide(),q.find(".pause").show())}function G(){A||(clearTimeout(x),t.clearQueue().stop(),w.hide(),d.pauseOnHover&&e.unbind(".jTour"),d.keyboardNav&&$(document).unbind(".jTour"),d.scrollBack?N(L,K,d.scrollDuration,function(){d.onStop.call(h,b)}):d.onStop.call(h,b),f&&f.exposeElement&&f.exposeElement.css(f.exposeElement.data("jTour")).removeData("jTour").removeClass(l+
"exposed"),T(),b=0,d.showControls&&(q.find(".play").show(),q.find(".pause").hide()))}function D(c,a){if(z){if(!0===c){p=!p;E();return}if(!p)return}!1!==a&&d.onPause.call(h,b);clearTimeout(x);t.clearQueue().stop();d.showControls&&p&&(q.find(".play").show(),q.find(".pause").hide());z=!0}function E(c){if(z&&!p){!1!==c&&d.onPlay.call(h,b);clearTimeout(x);c=t.width()/(F.width()/100)/100;var a=j[b].live||U.live,a=a-a*c;t.clearQueue().stop().animate({width:"100%"},{duration:a*(1/d.speed),easing:"linear",
step:I,complete:y});d.showControls&&(q.find(".play").hide(),q.find(".pause").show());z=!1}}function y(){if(!A){u&&j[b].steps&&(j[b].onStep&&j[b].onStep.call(h,f,100),$.each(u,function(c,a){j[b].steps[u[c]].call(h,f,a)}),u=null);if(j[b].goTo)return window.location=j[b].goTo+"#jTour="+(b+1),setTimeout(function(){location.reload()},1E3),!1;b+1<O?(clearTimeout(x),t.clearQueue().stop(),M(++b)):(G(),d.onFinish.call(h,b))}}function J(){!A&&0<b&&(clearTimeout(x),t.clearQueue().stop(),M(--b))}function M(c){var a=
$.extend({},U,j[c]),m=a.element=a.element?"string"==typeof a.element?$(a.element):a.element:0;if(m.length){if("auto"===a.live){var b=$("<div>").html(a.html).text().length;a.live=j[c].live=Math.max(2500,2500*Math.log(b/10)+1E3)}a.live=Math.abs(a.live);a.isArea="area"==a.element[0].nodeName.toLowerCase();f?f.onBeforeHide.call(h,f.element):(a.delayOut=0,a.animationOut="hide");A=!0;e[a.animationOut](a.delayOut,function(){e.css({left:0,top:0,"min-width":0});f&&f.onHide.call(h,f.element);x=setTimeout(function(){var b,
k,s,j;F.html(a.html);d.onChange.call(h,c);if(m[0]===B[0])b=P*C,k=Q*C/2-e.outerHeight()/2,j=s=0;else if(a.isArea){j=m[0].coords.split(",");k=a.exposeElement=$("img[usemap=#"+m.parent().attr("name")+"]");var n=k.offset(),r=parseInt(k.css("paddingTop"),10);s=parseInt(k.css("paddingLeft"),10);var v=parseInt(k.css("borderTopWidth"),10),x=parseInt(k.css("borderLeftWidth"),10);b=j[2]-j[0];k=j[3]-j[1];s=parseInt(j[0],10)+n.left+s+x;j=parseInt(j[1],10)+n.top+r+v}else b=m.outerWidth(),k=m.outerHeight(),s=m.offset().left,
j=m.offset().top;var g={left:s,top:j},n=r=0;switch(a.position){case "ne":isNaN(a.offset)||(a.offset={x:0,y:a.offset});g.top-=e.outerHeight()+a.offset.y;g.left=s+b-e.outerWidth()+a.offset.x;r=b/2-+e.outerWidth()/2+a.offset.x;n=-k/2-e.outerHeight()/2-a.offset.y;break;case "nw":isNaN(a.offset)||(a.offset={x:0,y:a.offset});g.top-=e.outerHeight()+a.offset.y;g.left=s-a.offset.x;r=-b/2+e.outerWidth()/2-a.offset.x;n=-k/2-e.outerHeight()/2-a.offset.y;break;case "n":isNaN(a.offset)||(a.offset={x:0,y:a.offset});
g.top-=e.outerHeight()+a.offset.y;g.left+=(b-e.outerWidth())/2+a.offset.x;r=a.offset.x;n=-k/2-e.outerHeight()/2-a.offset.y;break;case "se":isNaN(a.offset)||(a.offset={x:0,y:a.offset});g.top+=k+a.offset.y;g.left=s+b-e.outerWidth()+a.offset.x;r=b/2-e.outerWidth()/2+a.offset.x;n=k/2+e.outerHeight()/2+a.offset.y;break;case "sw":isNaN(a.offset)||(a.offset={x:0,y:a.offset});g.top+=k+a.offset.y;g.left=s-a.offset.x;r=-b/2+e.outerWidth()/2-a.offset.x;n=k/2+e.outerHeight()/2+a.offset.y;break;case "s":isNaN(a.offset)||
(a.offset={x:0,y:a.offset});g.top+=k+a.offset.y;g.left+=(b-e.outerWidth())/2+a.offset.x;r=a.offset.x;n=k/2+e.outerHeight()/2+a.offset.y;break;case "w":isNaN(a.offset)||(a.offset={x:a.offset,y:0});g.top-=e.outerHeight()/2-k/2-a.offset.y;g.left-=e.outerWidth()+a.offset.x;r=-b/2+e.outerWidth()/2-a.offset.x;n=-a.offset.y;break;case "e":isNaN(a.offset)||(a.offset={x:a.offset,y:0});g.top-=e.outerHeight()/2-k/2-a.offset.y;g.left+=b+a.offset.x;r=b/2-e.outerWidth()/2+a.offset.x;n=-a.offset.y;break;case "c":isNaN(a.offset)||
(a.offset={x:0,y:a.offset}),g.top-=e.outerHeight()/2-k/2-a.offset.y,g.left+=(b-e.outerWidth())/2+a.offset.x,r=a.offset.x,n=a.offset.y}b=Math.max(0,s-(P*C/2-b/2)+r);k=Math.max(0,j-(Q*C/2-k/2)+n);f&&(f.exposeElement&&!a.isArea)&&f.exposeElement.css(f.exposeElement.data("jTour")).removeData("jTour").removeClass(l+"exposed");N(b,k,d.scrollDuration,function(){V.removeAttr("class").addClass(l+"arrow "+a.position);a.steps?(u=[],$.each(a.steps,function(a){u.push(a)}),I=function(c){a.onStep.call(h,m,c);var d=
u.length;if(d)for(var b=0;b<d;b++)c>=u[b]&&(a.steps[u[b]].call(h,m),u.shift())}):I=function(c){a.onStep.call(h,m,c)};d.showControls&&(0===c?q.find("a.prev").hide():c==O-1?q.find("a.next").hide():q.find("a.next, a.prev").show());a.onBeforeShow.call(h,m);t.clearQueue().stop().css({width:"0%"});g["min-width"]=e.width();if(a.expose&&m!=B){var b={position:m.css("position"),zIndex:m.css("zIndex")},n={position:"relative",zIndex:Z+1};a.exposeElement=a.exposeElement||m;"object"===typeof a.expose&&$.each(a.expose,
function(a,c){b[a]=m.css(a);n[a]=c});a.exposeElement.data("jTour",b).css(n).addClass(l+"exposed")}f?f.overlayOpacity!=a.overlayOpacity&&w.fadeTo(2*a.delayIn,a.overlayOpacity):w.css({opacity:a.overlayOpacity});e.css(g).attr("class",W+" step-"+c)[a.animationIn](a.delayIn,function(){A=!1;a.onShow.call(h,m);f=a;d.autoplay&&!z&&(p=!1,t.stop().animate({width:"100%"},{duration:a.live*(1/d.speed),easing:"linear",step:I,complete:y}))})})},a.wait)})}else console&&m&&console.log('Element $("'+m.selector+"\") doesn't exist!"),
O--,y()}function T(){f&&(f.onBeforeHide.call(h,f.element),t.clearQueue().stop(),e.stop(),e[f.animationOut](f.delayOut,function(){F.empty();f.onHide.call(h,f.element);f=null}))}function v(c){d.speed=Math.max(0.1,d.speed+c);A||(D(null,!1),E(!1))}function X(c,a,b,d){"object"==typeof c&&(d=$.isFunction(a)?a:$.isFunction(b)?b:!1,b=!isNaN(a)?a:0,a=c.offset().top,c=c.offset().left);$.isFunction(b)&&(d=b,b=!1);var f={};null!==c&&(f.left=c);null!==a&&(f.top=a);e.animate(f,{duration:!1===b?0:b,complete:d&&
function(){d.call(h)}})}function N(c,a,b,e){B.scrollTop()==a&&B.scrollLeft()==c&&(b=1);var f={};$.each(d.axis,function(b,d){f[aa[d]]="x"==d?c:a});B.animate(f,{duration:b||d.scrollDuration,complete:e&&function(){e.call(h)},queue:!0,easing:d.easing})}if(this===window)return new jTour(j,R);if("function"!==typeof jQuery||171>jQuery.fn.jquery.replace(/\./g,""))return alert("jQuery >=1.7.1 is required for jTour!"),!1;$.isArray(j)||$.error("tourdata must be a valid array");var e,F,t,V,q,w,l="jTour_",B=/webkit/i.test(navigator.userAgent)?
$("body"):$("html"),b=0,f,O=j.length,x,u,I,z=!1,p=!1,A=!1,K,L,P,Q,Z=2E4,C=2.5,W,aa={x:"scrollLeft",y:"scrollTop"},d=$.extend({},{speed:1,axis:"xy",autostart:!1,autoplay:!0,pauseOnHover:!0,keyboardNav:!0,showProgress:!0,showControls:!0,scrollBack:!1,scrollDuration:300,easing:"swing",onStart:function(){},onStop:function(){},onPause:function(){},onPlay:function(){},onChange:function(){},onFinish:function(){},position:"c",live:"auto",offset:0,wait:0,expose:!1,overlayOpacity:0.2,delayIn:200,delayOut:100,
animationIn:"fadeIn",animationOut:"fadeOut",onBeforeShow:function(){},onShow:function(){},onBeforeHide:function(){},onHide:function(){},onStep:function(){}},R),U={position:d.position,live:d.live,offset:d.offset,wait:d.wait,expose:d.expose,overlayOpacity:d.overlayOpacity,delayIn:d.delayIn,delayOut:d.delayOut,animationIn:d.animationIn,animationOut:d.animationOut,onBeforeShow:d.onBeforeShow,onShow:d.onShow,onBeforeHide:d.onBeforeHide,onHide:d.onHide,onStep:d.onStep,element:B,goTo:null},h={start:function(c){H(c)},
restart:function(c){T();b=c||0;H(c)},pause:function(c){p=!0;D(c)},play:function(){p=!1;E()},stop:function(){G()},next:function(){y()},prev:function(){J()},faster:function(c){v(c||0.25)},slower:function(c){v(c||-0.25)},moveTo:function(c,a,b,d){X(c,a,b,d)},offset:function(c,a,b,d){X("+="+c,"+="+a,b,d)},scroll:function(b,a,d,e){N(b,a,d,e)}};h.box=h.content=h.overlay=null;h.tourdata=j;a:{e=$("<div/>",{"class":l+"box"}).hide().appendTo("body");V=$("<div/>",{"class":l+"arrow"}).appendTo(e);F=$("<div/>",
{"class":l+"content"}).appendTo(e);$("<div/>",{"class":l+"progress"}).html('<div class="'+l+'progress_bar"></div>').appendTo(e);t=e.find("."+l+"progress_bar");d.showControls&&(q=$("<ul/>",{"class":l+"nav"}).html('<li><a class="'+l+'nav_btn prev" title="previous" data-role="prev">&nbsp;</a></li><li><a class="'+l+'nav_btn play" title="play" data-role="play">&nbsp;</a></li><li><a class="'+l+'nav_btn pause" title="pause" data-role="pause">&nbsp;</a></li><li><a class="'+l+'nav_btn stop" title="stop" data-role="stop">&nbsp;</a></li><li><a class="'+
l+'nav_btn next" title="next" data-role="next">&nbsp;</a></li><li><a class="'+l+'nav_btn slower" title="slower" data-role="slower">&nbsp;</a></li><li><a class="'+l+'nav_btn faster" title="faster" data-role="faster">&nbsp;</a></li>').appendTo(e).delegate("a","click.jTour",function(){p=!0;switch($(this).data("role")){case "next":y();break;case "prev":J();break;case "slower":p=!1;v(-0.25);break;case "faster":p=!1;v(0.25);break;case "pause":D();break;case "play":p=!1;E();e.trigger("mouseleave");break;
case "stop":G()}}),e.addClass("has-controls"));w=$("<div/>",{"class":l+"overlay"}).css("opacity",d.overlayOpacity).hide();d.showProgress||e.find("."+l+"progress").hide();!1!==d.overlayOpacity?w.appendTo("body").css("height",$(document).height()):w.remove();W=e.attr("class");$(window).unbind("resize.jTour").bind("resize.jTour",function(){P=(window.innerWidth||document.documentElement.clientWidth)/C;Q=(window.innerHeight||document.documentElement.clientHeight)/C}).resize();h.box=e;h.content=F;h.overlay=
w;d.axis=d.axis.split("");if(location.hash){var Y=location.hash.split("=");if(Y[0].match(/jTour/)){location.hash="";H(parseInt(Y[1],10));break a}}d.autostart&&H()}return h};